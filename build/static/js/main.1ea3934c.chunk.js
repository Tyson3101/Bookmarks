(this.webpackJsonpbookmarks=this.webpackJsonpbookmarks||[]).push([[0],{20:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var r=n(10),c=n(2),a=n.n(c),i=n(4),s=n(1),o=n(8),u=n.n(o),l=n(3),d=n(0);var j=function(e){var t=e.auth0,n=e.user;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("header",{className:"navbar",children:[Object(d.jsx)("h1",{children:"Bookmarks"}),t&&n?Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)("img",{className:"profilePic",src:n.picture,alt:""})}),Object(d.jsx)("li",{children:Object(d.jsx)("button",{onClick:function(){return t.logout()},children:"Log out"})})]})}):Object(d.jsx)(d.Fragment,{})]})})},b=n(5),p=n.n(b);var h=function(){var e=Object(s.useState)(1),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(s.useEffect)((function(){var e=setTimeout((function(){r(n>=3?1:n+1)}),1e3);return function(){return clearTimeout(e)}}),[n]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("h1",{children:["Loading",".".repeat(n)]})})};var f=function(e){var t=e.user,n=e.checkLinks,r=e.setDisplay,c=Object(s.useRef)(),o=Object(s.useRef)(),u=Object(s.useRef)();function l(e){return new Promise((function(t,n){var r=new Image;r.src=e,r.onload=function(){return t(e)},r.onerror=function(){n(e)}}))}function j(){return(j=Object(i.a)(a.a.mark((function e(i){var s,d,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),c.current.value.length){e.next=3;break}return e.abrupt("return",alert("Please input a name."));case 3:if(e.prev=3,(s=new URL(o.current.value)).origin&&s.href&&s.host){e.next=7;break}throw Error;case 7:e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",alert("Invaild URL"));case 12:if(!(u.current.value.length>2)){e.next=24;break}return e.prev=13,e.next=16,l(u.current.value);case 16:d=e.sent,e.next=22;break;case 19:return e.prev=19,e.t1=e.catch(13),e.abrupt("return",alert("Invaild Image. Leave blank for website favicon."));case 22:e.next=33;break;case 24:return e.prev=24,e.next=27,l(s.origin+"/favicon.ico");case 27:d=e.sent,e.next=33;break;case 30:e.prev=30,e.t2=e.catch(24),d="https://i.imgur.com/O8FxG8i.png";case 33:j={name:c.current.value,url:s.href,image:d},p()("https://".concat("bookmarksserver.glitch.me","/addLink"),{method:"POST",headers:{Authorization:"bearer ".concat(t.accessToken),"content-type":"application/json"},body:JSON.stringify({user:t,link:j})}).then((function(e){return e.json()})).then((function(e){e.success?(n(),r(!1)):alert("Unknown Error!")})).catch((function(e){return alert("Error! "+e.message)}));case 35:case"end":return e.stop()}}),e,null,[[3,9],[13,19],[24,30]])})))).apply(this,arguments)}return Object(d.jsx)("div",{className:"LinkPromptContainer addLink",id:"outside",children:Object(d.jsxs)("div",{className:"LinkPrompt",children:[Object(d.jsx)("h1",{children:"Add Link"}),Object(d.jsxs)("form",{children:[Object(d.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(d.jsx)("input",{ref:c,autoComplete:"off",type:"text",placeholder:"Name of bookmark",name:"name",required:!0}),Object(d.jsx)("label",{htmlFor:"name",children:"Weppage URL: "}),Object(d.jsx)("input",{ref:o,autoComplete:"off",type:"url",defaultValue:"https://",name:"url",required:!0}),Object(d.jsx)("label",{htmlFor:"name",children:"Image: "}),Object(d.jsx)("input",{ref:u,type:"url",autoComplete:"off",placeholder:"Defaults to Website Favicon",name:"url"}),Object(d.jsx)("button",{type:"submit",onClick:function(e){return j.apply(this,arguments)},children:"Add"})]})]})})},m=n(7);var v=function(e){var t=e.user,n=e.checkLinks,r=e.setDisplay,c=e.link,o=Object(s.useRef)(),u=Object(s.useRef)(),l=Object(s.useRef)();function j(e){return new Promise((function(t,n){var r=new Image;r.src=e,r.onload=function(){return t(e)},r.onerror=function(){n(e)}}))}function b(){return(b=Object(i.a)(a.a.mark((function e(i){var s,b,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),o.current.value.length){e.next=3;break}return e.abrupt("return",alert("Please input a name."));case 3:if(e.prev=3,(s=new URL(u.current.value)).origin&&s.href&&s.host){e.next=7;break}throw Error;case 7:e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",alert("Invaild URL"));case 12:if(!(l.current.value.length>2)){e.next=24;break}return e.prev=13,e.next=16,j(l.current.value);case 16:b=e.sent,e.next=22;break;case 19:return e.prev=19,e.t1=e.catch(13),e.abrupt("return",alert("Invaild Image. Leave blank for website favicon."));case 22:e.next=33;break;case 24:return e.prev=24,e.next=27,j(s.origin+"/favicon.ico");case 27:b=e.sent,e.next=33;break;case 30:e.prev=30,e.t2=e.catch(24),b="https://i.imgur.com/O8FxG8i.png";case 33:h={name:o.current.value,url:s.href,image:b,id:c.id},p()("https://".concat("bookmarksserver.glitch.me","/editLink"),{method:"POST",headers:{Authorization:"bearer ".concat(t.accessToken),"content-type":"application/json"},body:JSON.stringify({user:t,link:h})}).then((function(e){return e.json()})).then((function(e){e.success?(n(),r(Object(d.jsx)("div",{style:{display:"none"}}))):alert("Unknown Error!")})).catch((function(e){return alert("Error! "+e.message)}));case 35:case"end":return e.stop()}}),e,null,[[3,9],[13,19],[24,30]])})))).apply(this,arguments)}return Object(d.jsx)("div",{className:"LinkPromptContainer editLink",id:"outside",children:Object(d.jsxs)("div",{className:"LinkPrompt",children:[Object(d.jsx)("h1",{children:"Edit Link"}),Object(d.jsxs)("form",{children:[Object(d.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(d.jsx)("input",{ref:o,autoComplete:"off",type:"text",defaultValue:c.name,name:"name",required:!0}),Object(d.jsx)("label",{htmlFor:"name",children:"Weppage URL: "}),Object(d.jsx)("input",{ref:u,autoComplete:"off",type:"url",defaultValue:c.url,name:"url",required:!0}),Object(d.jsx)("label",{htmlFor:"name",children:"Image: "}),Object(d.jsx)("input",{ref:l,type:"url",autoComplete:"off",defaultValue:c.image,name:"url"}),Object(d.jsx)("button",{type:"submit",onClick:function(e){return b.apply(this,arguments)},children:"Edit"}),Object(d.jsx)("button",{className:"delete",onClick:function(e){e.preventDefault(),p()("https://".concat("bookmarksserver.glitch.me","/deleteLink"),{method:"POST",headers:{Authorization:"bearer ".concat(t.accessToken),"content-type":"application/json"},body:JSON.stringify({user:t,link:c})}).then((function(e){return e.json()})).then((function(e){e.success?(n(),r(Object(d.jsx)("div",{style:{display:"none"}}))):alert("Unknown Error!")})).catch((function(e){return alert("Error! "+e.message)}))},children:"Delete"})]})]})})};var O=function(e){var t=e.auth0,n=e.user,r=Object(s.useState)([]),c=Object(l.a)(r,2),a=c[0],i=c[1],o=Object(s.useState)(0),u=Object(l.a)(o,2),b=u[0],O=u[1],x=Object(s.useState)(),k=Object(l.a)(x,2),g=k[0],y=k[1],L=Object(s.useState)(!1),w=Object(l.a)(L,2),E=w[0],N=w[1],S=Object(s.useState)(Object(d.jsx)("div",{style:{display:"none"}})),F=Object(l.a)(S,2),I=F[0],C=F[1];function R(){p()("https://".concat("bookmarksserver.glitch.me","/getLinks"),{method:"POST",headers:{Authorization:"bearer ".concat(n.accessToken),"content-type":"application/json"},body:JSON.stringify({user:n})}).then((function(e){return e.json()})).then((function(e){i(e)}))}return Object(s.useEffect)((function(){R();var e=Object(m.setInterval)((function(){R()}),6e4);return function(){return clearInterval(e)}}),[]),document.onclick=function(e){var t;if(E||"div"!==I.type){var r=e.target;if("outside"!==r.id)return;if(r.classList.contains("addLink"))return N(!1);if(r.classList.contains("editLink"))return C(Object(d.jsx)("div",{style:{display:"none"}}))}var c,i,s=e.target;if("addLink"===s.id)return N(!0);if(!(null===(t=s.id)||void 0===t?void 0:t.includes("http")))if(null===(c=s.parentElement)||void 0===c?void 0:c.id.includes("http"))s=s.parentElement;else if("addLink"===(null===(i=s.parentElement)||void 0===i?void 0:i.id))return N(!0);switch(b&&(clearTimeout(b),O(0)),e.detail){case 1:O(setTimeout((function(){s.id.includes("http")&&window.open(s.id.split(" - ")[0])}),500));break;case 2:var o=a.find((function(e){return e.id===s.id.split(" - ")[1]}));if(!o)return;C(Object(d.jsx)(v,{user:n,link:o,setDisplay:C,checkLinks:R}))}},document.onmouseover=function(e){var t,n=e.target;if(!(null===(t=n.id)||void 0===t?void 0:t.includes("http"))){var r;if(!(null===(r=n.parentElement)||void 0===r?void 0:r.id.includes("http")))return;n=n.parentElement}y(n),n.querySelector(".msg").style.opacity="100%"},Object(s.useEffect)((function(){if(g){var e=Object(m.setInterval)((function(){if(!g.matches(":hover"))return g.querySelector(".msg").style.opacity="0%",clearInterval(e)}),500);y(null)}}),[g]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{children:Object(d.jsx)(j,{auth0:t,user:n})}),Object(d.jsxs)("div",{className:"links",children:[Object(d.jsxs)("div",{className:"link noRedirect",id:"addLink",children:[Object(d.jsx)("img",{src:"https://img.icons8.com/ios-glyphs/480/000000/plus.png",alt:"+"}),Object(d.jsx)("span",{children:"Add Link"})]}),a.length?a.map((function(e){return Object(d.jsxs)("div",{className:"link",id:"".concat(e.url," - ").concat(e.id),children:[Object(d.jsx)("img",{src:e.image,alt:""}),Object(d.jsxs)("span",{className:"linkName",children:[e.name.length>16?e.name.slice(0,16)+"..":e.name,Object(d.jsx)("span",{className:"msg",style:{opacity:0},children:"Double Click to Edit/Delete"})]})]},e.id)})):Object(d.jsx)(h,{})]}),Object(d.jsx)("div",{style:{display:E?"block":"none"},children:Object(d.jsx)(f,{user:n,checkLinks:R,setDisplay:N})}),Object(d.jsx)("div",{style:{display:I?"block":"none"},children:I})]})},x=(n(20),n(11));var k=function(e){var t=e.auth0;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(j,{}),Object(d.jsx)("div",{className:"loginContainer",children:Object(d.jsxs)("div",{className:"login",children:[Object(d.jsx)("h1",{children:"Log in"}),Object(d.jsx)("span",{children:"Log in to access your bookmarks"}),Object(d.jsx)("button",{onClick:function(){return t.loginWithRedirect()},children:"Log in"})]})})]})};u.a.render(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(j,{}),Object(d.jsx)(h,{})]}),document.getElementById("root"));var g={domain:"dev-jmaenfuw.us.auth0.com",client_id:"QopskNe2tUV2pxtzeF1MDyZJEWkxWGlS",redirect_uri:window.location.origin};function y(e){return L.apply(this,arguments)}function L(){return(L=Object(i.a)(a.a.mark((function e(t){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getTokenSilently();case 3:return n=e.sent,e.next=6,t.getUser();case 6:return c=e.sent,e.abrupt("return",Object(r.a)(Object(r.a)({},c),{},{accessToken:n}));case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}Object(x.a)(g).then(function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:if(n=e.sent){e.next=16;break}return e.prev=4,e.next=7,t.handleRedirectCallback();case 7:return e.next=9,y(t);case 9:n=e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(4),u.a.render(Object(d.jsx)(k,{auth0:t}),document.getElementById("root")),e.abrupt("return");case 16:n&&u.a.render(Object(d.jsx)(O,{auth0:t,user:n}),document.getElementById("root"));case 17:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}())}},[[25,1,2]]]);
//# sourceMappingURL=main.1ea3934c.chunk.js.map